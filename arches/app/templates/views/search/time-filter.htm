{% load i18n %}
<div class="search-container time-search-container">

    <h3 class="search-title">Time Filter</h3>

    <!-- Calendar Search -->
    <div id="calendar" class="time-search-subcontainer">

        <!-- Date Type -->
        <div class="calendar">
            <h3 class="search-label">Type</h3>
            <select id="" class="resources" data-placeholder="Date type" tabindex="-1" data-bind="value: dateNodeId, chosen:{ width: '100%' }">
                <option value="all">{% trans "Search all dates" %}</option>
                {% for graph in graph_models %}
                    {% if graph.isresource and graph.isactive %}
                    <optgroup label="{{ graph.name }}">
                        {% for node in date_nodes %}
                            {% if graph.graphid == node.graph_id %}
                            <option value="{{ node.nodeid }}">{{ node.name }}</option>
                            {% endif %}
                        {% endfor %}
                    </optgroup>
                    {% endif %}
                {% endfor %}
            </select>
        </div>

        <!-- Date Selector -->
        <div class="calendar">
            <h3 class="search-label">Within</h3>
            <select id="" class="resources" placeholder="Select" tabindex="-1" data-bind="value: dateRangeType, chosen:{ width: '100%' }">
                <option value="custom">{% trans "Custom date range" %}</option>
                <option value="today">{% trans "Today" %}</option>
                <option value="last-7">{% trans "Last 7 days" %}</option>
                <option value="last-30">{% trans "Last 30 days" %}</option>
                <option value="this-week">{% trans "This week" %}</option>
                <option value="this-month">{% trans "This month" %}</option>
                <option value="this-quarter">{% trans "This quarter" %}</option>
                <option value="this-year">{% trans "This year" %}</option>
            </select>
        </div>

        <!-- From Date -->
        <div class="calendar">
            <h3 class="search-label">From</h3>
            <div id="search-from-c">
                <input class="form-control input-lg" data-bind="value: fromDate, datepicker: {format: format, maxDate: toDate}, disable: dateRangeType() !== 'custom'">
            </div>
        </div>

        <!-- To Date -->
        <div class="calendar">
            <h3 class="search-label">To</h3>
            <div id="search-from-b">
                <input class="form-control input-lg" data-bind="value: toDate, datepicker: {format: format, minDate: fromDate}, disable: dateRangeType() !== 'custom'">
            </div>
        </div>

        <div class="pull-right" style="margin:-32px 20px 0 0; cursor:pointer;" data-bind="if: fromDate() || toDate() || dateNodeId() !== 'all'">
            <a href="#" data-bind="click: function () { clear(); }"><i class="fa fa-close"></i></a>
        </div>
    </div>

    <!-- Time Wheel TODO: replace with time sunburst binding... -->
    <div id="main" class="time-search-subcontainer">
        <div id="sequence"><svg width="750" height="50" id="trail" style="visibility: hidden;"><text id="endlabel" style="fill: rgb(0, 0, 0);"></text></svg></div>
        <div id="chart" class="">
            <svg width="750" height="600"><g id="container" transform="translate(375,300)"><circle r="300" style="opacity: 0;"></circle><path display="none" d="M0,134.16407864998737A134.16407864998737,134.16407864998737 0 1,1 0,-134.16407864998737A134.16407864998737,134.16407864998737 0 1,1 0,134.16407864998737Z" fill-rule="evenodd" style="fill: rgb(49, 130, 189); opacity: 1;"></path><path d="M1.161801964362116e-14,-189.73665961010275A189.73665961010275,189.73665961010275 0 1,1 -77.50162696536826,173.1863095562721L-54.80192598020208,122.46121389591258A134.16407864998737,134.16407864998737 0 1,0 8.215180473963039e-15,-134.16407864998737Z" fill-rule="evenodd" style="fill: rgb(107, 174, 214); opacity: 1;"></path><path d="M1.4229109974251756e-14,-232.379000772445A232.379000772445,232.379000772445 0 0,1 1.2671165757026568,-232.3755460791509L1.0345963516980674,-189.73383886483995A189.73665961010275,189.73665961010275 0 0,0 1.161801964362116e-14,-189.73665961010275Z" fill-rule="evenodd" style="fill: rgb(107, 174, 214); opacity: 1;"></path><path d="M1.2671165757026568,-232.3755460791509A232.379000772445,232.379000772445 0 0,1 28.83279862215122,-230.5833249036332L23.54188149356412,-188.27049640276348A189.73665961010275,189.73665961010275 0 0,0 1.0345963516980674,-189.73383886483995Z" fill-rule="evenodd" style="fill: rgb(158, 202, 225); opacity: 1;"></path><path d="M1.4631401921531315,-268.3241681637681A268.32815729997475,268.32815729997475 0 0,1 5.949645309694734,-268.2621883916718L5.152543981702574,-232.32187002199476A232.379000772445,232.379000772445 0 0,0 1.2671165757026568,-232.3755460791509Z" fill-rule="evenodd" style="fill: rgb(158, 202, 225); opacity: 1;"></path><path d="M5.949645309694734,-268.2621883916718A268.32815729997475,268.32815729997475 0 0,1 9.654688707713076,-268.15440885049264L8.361205686510276,-232.22853020132533A232.379000772445,232.379000772445 0 0,0 5.152543981702574,-232.32187002199476Z" fill-rule="evenodd" style="fill: rgb(158, 202, 225); opacity: 1;"></path><path d="M9.654688707713076,-268.15440885049264A268.32815729997475,268.32815729997475 0 0,1 13.689115069848372,-267.9787456657793L11.85512140581708,-232.07640142085393A232.379000772445,232.379000772445 0 0,0 8.361205686510276,-232.22853020132533Z" fill-rule="evenodd" style="fill: rgb(158, 202, 225); opacity: 1;"></path><path d="M13.689115069848372,-267.9787456657793A268.32815729997475,268.32815729997475 0 0,1 33.293248091978555,-266.2546894075031L28.83279862215122,-230.5833249036332A232.379000772445,232.379000772445 0 0,0 11.85512140581708,-232.07640142085393Z" fill-rule="evenodd" style="fill: rgb(198, 219, 239); opacity: 1;"></path><path d="M15.30489592399887,-299.60934591690483A300,300 0 0,1 23.51027672166253,-299.077359371235L21.028230767787328,-267.5029224340861A268.32815729997475,268.32815729997475 0 0,0 13.689115069848372,-267.9787456657793Z" fill-rule="evenodd" style="fill: rgb(198, 219, 239); opacity: 1;"></path><path d="M23.51027672166253,-299.077359371235A300,300 0 0,1 37.22298296271461,-297.6817924216351L33.293248091978555,-266.2546894075031A268.32815729997475,268.32815729997475 0 0,0 21.028230767787328,-267.5029224340861Z" fill-rule="evenodd" style="fill: rgb(198, 219, 239); opacity: 1;"></path><path d="M28.83279862215122,-230.5833249036332A232.379000772445,232.379000772445 0 0,1 136.92906672994806,-187.7509805153236L111.80211481462705,-153.2980336565898A189.73665961010275,189.73665961010275 0 0,0 23.54188149356412,-188.27049640276348Z" fill-rule="evenodd" style="fill: rgb(230, 85, 13); opacity: 1;"></path><path d="M33.293248091978555,-266.2546894075031A268.32815729997475,268.32815729997475 0 0,1 52.603518311232925,-263.12139757397114L45.55598318596761,-227.86981457832417A232.379000772445,232.379000772445 0 0,0 28.83279862215122,-230.5833249036332Z" fill-rule="evenodd" style="fill: rgb(230, 85, 13); opacity: 1;"></path><path d="M52.603518311232925,-263.12139757397114A268.32815729997475,268.32815729997475 0 0,1 92.15544852313744,-252.00669298155427L79.80895951818616,-218.24419804573162A232.379000772445,232.379000772445 0 0,0 45.55598318596761,-227.86981457832417Z" fill-rule="evenodd" style="fill: rgb(230, 85, 13); opacity: 1;"></path><path d="M92.15544852313744,-252.00669298155427A268.32815729997475,268.32815729997475 0 0,1 119.6131400804424,-240.19304053218622L103.58801793608977,-208.01327491309863A232.379000772445,232.379000772445 0 0,0 79.80895951818616,-218.24419804573162Z" fill-rule="evenodd" style="fill: rgb(230, 85, 13); opacity: 1;"></path><path d="M119.6131400804424,-240.19304053218622A268.32815729997475,268.32815729997475 0 0,1 158.1120670728395,-216.7961582822765L136.92906672994806,-187.7509805153236A232.379000772445,232.379000772445 0 0,0 103.58801793608977,-208.01327491309863Z" fill-rule="evenodd" style="fill: rgb(230, 85, 13); opacity: 1;"></path><path d="M136.92906672994806,-187.7509805153236A232.379000772445,232.379000772445 0 0,1 229.53985858227875,-36.21399345594836L187.41850971906433,-29.568601838520884A189.73665961010275,189.73665961010275 0 0,0 111.80211481462705,-153.2980336565898Z" fill-rule="evenodd" style="fill: rgb(253, 141, 60); opacity: 1;"></path><path d="M158.1120670728395,-216.7961582822765A268.32815729997475,268.32815729997475 0 0,1 211.984424257139,-164.5071544716803L183.58389661330057,-142.46737487676597A232.379000772445,232.379000772445 0 0,0 136.92906672994806,-187.7509805153236Z" fill-rule="evenodd" style="fill: rgb(253, 141, 60); opacity: 1;"></path><path d="M211.984424257139,-164.5071544716803A268.32815729997475,268.32815729997475 0 0,1 250.70097799656958,-95.65050774336495L217.11341569863285,-82.83576959063421A232.379000772445,232.379000772445 0 0,0 183.58389661330057,-142.46737487676597Z" fill-rule="evenodd" style="fill: rgb(253, 174, 107); opacity: 1;"></path><path d="M237.00579140505909,-183.92459009186786A300,300 0 0,1 270.03156891577856,-130.70176658669587L241.52357766664,-116.90321394686504A268.32815729997475,268.32815729997475 0 0,0 211.984424257139,-164.5071544716803Z" fill-rule="evenodd" style="fill: rgb(253, 174, 107); opacity: 1;"></path><path d="M270.03156891577856,-130.70176658669587A300,300 0 0,1 280.29221441300433,-106.94051869826703L250.70097799656958,-95.65050774336495A268.32815729997475,268.32815729997475 0 0,0 241.52357766664,-116.90321394686504Z" fill-rule="evenodd" style="fill: rgb(253, 174, 107); opacity: 1;"></path><path d="M250.70097799656958,-95.65050774336495A268.32815729997475,268.32815729997475 0 0,1 256.7668685393414,-77.91517965390682L222.366631005249,-67.47652492071174A232.379000772445,232.379000772445 0 0,0 217.11341569863285,-82.83576959063421Z" fill-rule="evenodd" style="fill: rgb(253, 208, 162); opacity: 1;"></path><path d="M280.29221441300433,-106.94051869826703A300,300 0 0,1 287.0740862118597,-87.1118190926221L256.7668685393414,-77.91517965390682A268.32815729997475,268.32815729997475 0 0,0 250.70097799656958,-95.65050774336495Z" fill-rule="evenodd" style="fill: rgb(253, 208, 162); opacity: 1;"></path><path d="M256.7668685393414,-77.91517965390682A268.32815729997475,268.32815729997475 0 0,1 265.04979828445454,-41.816317740446266L229.53985858227875,-36.21399345594836A232.379000772445,232.379000772445 0 0,0 222.366631005249,-67.47652492071174Z" fill-rule="evenodd" style="fill: rgb(49, 163, 84); opacity: 1;"></path><path d="M287.0740862118597,-87.1118190926221A300,300 0 0,1 296.33468319332377,-46.75206451818413L265.04979828445454,-41.816317740446266A268.32815729997475,268.32815729997475 0 0,0 256.7668685393414,-77.91517965390682Z" fill-rule="evenodd" style="fill: rgb(49, 163, 84); opacity: 1;"></path><path d="M229.53985858227875,-36.21399345594836A232.379000772445,232.379000772445 0 0,1 180.39580645598065,146.48328578065272L147.292559185008,119.60310200296193A189.73665961010275,189.73665961010275 0 0,0 187.41850971906433,-29.568601838520884Z" fill-rule="evenodd" style="fill: rgb(116, 196, 118); opacity: 1;"></path><path d="M265.04979828445454,-41.816317740446266A268.32815729997475,268.32815729997475 0 0,1 265.54778019615253,38.52760611426374L229.97112356843436,33.365885641953064A232.379000772445,232.379000772445 0 0,0 229.53985858227875,-36.21399345594836Z" fill-rule="evenodd" style="fill: rgb(116, 196, 118); opacity: 1;"></path><path d="M265.54778019615253,38.52760611426374A268.32815729997475,268.32815729997475 0 0,1 208.3031348360801,169.14432895448144L180.39580645598065,146.48328578065272A232.379000772445,232.379000772445 0 0,0 229.97112356843436,33.365885641953064Z" fill-rule="evenodd" style="fill: rgb(116, 196, 118); opacity: 1;"></path><path d="M180.39580645598065,146.48328578065272A232.379000772445,232.379000772445 0 0,1 -94.91972015033886,212.1090444242804L-77.50162696536826,173.1863095562721A189.73665961010275,189.73665961010275 0 0,0 147.292559185008,119.60310200296193Z" fill-rule="evenodd" style="fill: rgb(107, 174, 214); opacity: 1;"></path><path d="M-77.50162696536826,173.1863095562721A189.73665961010275,189.73665961010275 0 0,1 -3.485405893086348e-14,-189.73665961010275L-2.4645541421889116e-14,-134.16407864998737A134.16407864998737,134.16407864998737 0 0,0 -54.80192598020208,122.46121389591258Z" fill-rule="evenodd" style="fill: rgb(161, 217, 155); opacity: 1;"></path><path d="M-94.91972015033886,212.1090444242804A232.379000772445,232.379000772445 0 0,1 -210.0986494320535,-99.29026894327103L-171.5448289188046,-81.07016511157516A189.73665961010275,189.73665961010275 0 0,0 -77.50162696536826,173.1863095562721Z" fill-rule="evenodd" style="fill: rgb(199, 233, 192); opacity: 1;"></path><path d="M-109.60385196040416,244.92242779182516A268.32815729997475,268.32815729997475 0 0,1 -258.3866870355749,72.36242092951204L-223.76943497250713,62.667694804300176A232.379000772445,232.379000772445 0 0,0 -94.91972015033886,212.1090444242804Z" fill-rule="evenodd" style="fill: rgb(117, 107, 177); opacity: 1;"></path><path d="M-122.54083178964366,273.8315988784024A300,300 0 0,1 -178.4884016090956,241.1262957270115L-159.64487967728823,215.6699153633259A268.32815729997475,268.32815729997475 0 0,0 -109.60385196040416,244.92242779182516Z" fill-rule="evenodd" style="fill: rgb(117, 107, 177); opacity: 1;"></path><path d="M-178.4884016090956,241.1262957270115A300,300 0 0,1 -238.36984031397375,182.15328497913688L-213.20446669112604,162.92285101529657A268.32815729997475,268.32815729997475 0 0,0 -159.64487967728823,215.6699153633259Z" fill-rule="evenodd" style="fill: rgb(117, 107, 177); opacity: 1;"></path><path d="M-238.36984031397375,182.15328497913688A300,300 0 0,1 -288.8850983462546,80.90364610742095L-258.38668703557494,72.3624209295118A268.32815729997475,268.32815729997475 0 0,0 -213.20446669112604,162.92285101529657Z" fill-rule="evenodd" style="fill: rgb(117, 107, 177); opacity: 1;"></path><path d="M-258.3866870355749,72.36242092951204A268.32815729997475,268.32815729997475 0 0,1 -268.1888360644537,-8.64570473666289L-232.25834504319718,-7.487399935569513A232.379000772445,232.379000772445 0 0,0 -223.76943497250713,62.667694804300176Z" fill-rule="evenodd" style="fill: rgb(158, 154, 200); opacity: 1;"></path><path d="M-288.88509834625455,80.90364610742122A300,300 0 0,1 -297.2234788332441,40.72104652712262L-265.84476127204147,36.42201125983116A268.32815729997475,268.32815729997475 0 0,0 -258.3866870355749,72.36242092951204Z" fill-rule="evenodd" style="fill: rgb(158, 154, 200); opacity: 1;"></path><path d="M-297.2234788332441,40.72104652712262A300,300 0 0,1 -299.9837296177313,-3.124414286853248L-268.31360462766565,-2.794561094110156A268.32815729997475,268.32815729997475 0 0,0 -265.84476127204147,36.42201125983116Z" fill-rule="evenodd" style="fill: rgb(158, 154, 200); opacity: 1;"></path><path d="M-299.9837296177313,-3.124414286853248A300,300 0 0,1 -299.84423412333285,-9.666191752285071L-268.1888360644537,-8.64570473666289A268.32815729997475,268.32815729997475 0 0,0 -268.31360462766565,-2.794561094110156Z" fill-rule="evenodd" style="fill: rgb(158, 154, 200); opacity: 1;"></path><path d="M-268.1888360644537,-8.64570473666289A268.32815729997475,268.32815729997475 0 0,1 -242.60102361194578,-114.65052700461572L-210.0986494320535,-99.29026894327103A232.379000772445,232.379000772445 0 0,0 -232.25834504319718,-7.487399935569513Z" fill-rule="evenodd" style="fill: rgb(188, 189, 220); opacity: 1;"></path><path d="M-299.84423412333285,-9.666191752285071A300,300 0 0,1 -294.4939453582155,-57.21290193087878L-263.40339231323145,-51.172775162989566A268.32815729997475,268.32815729997475 0 0,0 -268.1888360644537,-8.64570473666289Z" fill-rule="evenodd" style="fill: rgb(188, 189, 220); opacity: 1;"></path><path d="M-294.4939453582155,-57.21290193087878A300,300 0 0,1 -279.73645435049235,-108.38595899568773L-250.20389108498708,-96.94334884834504A268.32815729997475,268.32815729997475 0 0,0 -263.40339231323145,-51.172775162989566Z" fill-rule="evenodd" style="fill: rgb(188, 189, 220); opacity: 1;"></path><path d="M-279.73645435049235,-108.38595899568773A300,300 0 0,1 -271.23619010367116,-128.18318601924807L-242.60102361194578,-114.65052700461572A268.32815729997475,268.32815729997475 0 0,0 -250.20389108498708,-96.94334884834504Z" fill-rule="evenodd" style="fill: rgb(188, 189, 220); opacity: 1;"></path><path d="M-210.0986494320535,-99.29026894327103A232.379000772445,232.379000772445 0 0,1 -4.2687329922755264e-14,-232.379000772445L-3.485405893086348e-14,-189.73665961010275A189.73665961010275,189.73665961010275 0 0,0 -171.5448289188046,-81.07016511157516Z" fill-rule="evenodd" style="fill: rgb(218, 218, 235); opacity: 1;"></path><path d="M-242.60102361194578,-114.65052700461572A268.32815729997475,268.32815729997475 0 0,1 -227.13671983110478,-142.85975816991362L-196.70616950600544,-123.7201797536467A232.379000772445,232.379000772445 0 0,0 -210.0986494320535,-99.29026894327103Z" fill-rule="evenodd" style="fill: rgb(99, 99, 99); opacity: 1;"></path><path d="M-271.23619010367116,-128.18318601924807A300,300 0 0,1 -262.5384785023876,-145.16730797824755L-234.82155385628232,-129.84158750000364A268.32815729997475,268.32815729997475 0 0,0 -242.60102361194578,-114.65052700461572Z" fill-rule="evenodd" style="fill: rgb(99, 99, 99); opacity: 1;"></path><path d="M-262.5384785023876,-145.16730797824755A300,300 0 0,1 -253.94657286433744,-159.7220652585539L-227.13671983110478,-142.85975816991362A268.32815729997475,268.32815729997475 0 0,0 -234.82155385628232,-129.84158750000364Z" fill-rule="evenodd" style="fill: rgb(99, 99, 99); opacity: 1;"></path><path d="M-227.13671983110478,-142.85975816991362A268.32815729997475,268.32815729997475 0 0,1 -4.929108284377823e-14,-268.32815729997475L-4.2687329922755264e-14,-232.379000772445A232.379000772445,232.379000772445 0 0,0 -196.70616950600544,-123.7201797536467Z" fill-rule="evenodd" style="fill: rgb(150, 150, 150); opacity: 1;"></path><path d="M-253.94657286433744,-159.7220652585539A300,300 0 0,1 -197.5345641111154,-225.78772327438804L-176.68028530329775,-201.9506790905772A268.32815729997475,268.32815729997475 0 0,0 -227.13671983110478,-142.85975816991362Z" fill-rule="evenodd" style="fill: rgb(150, 150, 150); opacity: 1;"></path><path d="M-197.5345641111154,-225.78772327438804A300,300 0 0,1 -180.45463974609473,-239.65834638941152L-161.40353653100127,-214.35694156076616A268.32815729997475,268.32815729997475 0 0,0 -176.68028530329775,-201.9506790905772Z" fill-rule="evenodd" style="fill: rgb(150, 150, 150); opacity: 1;"></path><path d="M-180.45463974609473,-239.65834638941152A300,300 0 0,1 -5.510910596163089e-14,-300L-4.929108284377823e-14,-268.32815729997475A268.32815729997475,268.32815729997475 0 0,0 -161.40353653100127,-214.35694156076616Z" fill-rule="evenodd" style="fill: rgb(150, 150, 150); opacity: 1;"></path></g></svg>
        </div>
    </div>

</div>
