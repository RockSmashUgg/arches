{% extends "views/forms/widgets/base.htm" %}
{% load i18n %}

{% block form %}
<div class="row widget-wrapper">
    <div class="form-group">
        <label class="control-label widget-input-label" for="" data-bind="text:label"></label>
        <!-- Form -->
        <div class="col-lg-12" style="padding-bottom: 10px;">
            <form class="widgets" style="margin-bottom: 20px;">
                <div class="row widget-container">
                    <div class="col-xs-12">
                        <div class="form-group">
                            <div class="relative">
                                <label class="col-xs-12 control-label widget-input-label" for=""> File Upload
                            </label></div>

                            <div class="col-xs-12 dropzone" data-bind="dropzone: dropzoneOptions">
                                <div class="bord-top pad-ver">
                                    <span class="btn btn-success fileinput-button dz-clickable">
                                        <i class="fa fa-plus"></i>
                                        <span>Add files...</span>
                                    </span>

                                    <div class="btn-group pull-right">
                                        <button id="dz-remove-btn" class="btn btn-danger cancel" type="reset" data-bind="click: reset">
                                            <i class="ion ion-close"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="dz-previews">
                                    <!-- ko foreach: uploadedFiles -->
                                        <div class="media pad-top bord-top">
                                            <div class="media-body">
                                                <div class="media-block">
                                                    <div class="media-left">
                                                        <!-- ko if: ko.unwrap(type).indexOf('image') >= 0 -->
                                                            <img class="dz-img" width="50" height="50" data-bind="attr: {src: url}">
                                                        <!-- /ko -->
                                                        <!-- ko if: ko.unwrap(type).indexOf('image') < 0 -->
                                                            <img class="dz-img">
                                                        <!-- /ko -->
                                                    </div>
                                                    <div class="media-body">
                                                        <p class="text-main text-bold mar-no text-overflow" data-bind="text: name"></p>
                                                        <p class="text-sm" data-bind="html: $parent.formatSize($data)"></p>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="media-right">
                                                <button class="btn btn-xs btn-danger dz-cancel" data-bind="click: $parent.removeUploadedFile"><i class="ion ion-close"></i></button>
                                            </div>
                                        </div>
                                    <!-- /ko -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<template id="file-widget-dz-preview">
    <div class="media pad-top bord-top">
        <div class="media-body">
            <div class="media-block">
                <div class="media-left">
                    <img class="dz-img" data-dz-thumbnail="">
                </div>
                <div class="media-body">
                    <p class="text-main text-bold mar-no text-overflow" data-dz-name=""></p>
                    <span class="dz-error text-danger text-sm" data-dz-errormessage=""></span>
                    <p class="text-sm" data-dz-size=""></p>
                </div>
            </div>
        </div>
        <div class="media-right">
            <button data-dz-remove="" class="btn btn-xs btn-danger dz-cancel"><i class="ion ion-close"></i></button>
        </div>
    </div>
</template>
{% endblock form %}

{% block config_form %}
<div class="control-label">
    {% trans "Accepted Files" %}
</div>
<div class="col-xs-12 pad-no crud-widget-container">
    <input type="" placeholder="{% trans "Accepted Files" %}" id="" class="form-control input-md widget-input" data-bind="value: acceptedFiles, valueUpdate: 'keyup'">
</div>

<div class="control-label">
    {% trans "Max File Size (mb)" %}
</div>
<div class="col-xs-12 pad-no crud-widget-container">
    <input type="number" placeholder="{% trans "Max File Size (mb)" %}" id="" class="form-control input-md widget-input" data-bind="value: maxFilesize">
</div>
{% endblock config_form %}

{% block report %}
<dt data-bind="text: label"></dt>
<dd>
    <!-- ko if: uploadedFiles().length === 0 -->
        {% trans "None" %}
    <!-- /ko -->
    <div data-bind="foreach: uploadedFiles">
        <div class="media pad-top bord-top">
            <div class="media-body">
                <div class="media-block">
                    <div class="media-left" data-bind="if: ko.unwrap(type).indexOf('image') >= 0">
                        <img class="dz-img" width="50" height="50" data-bind="attr: {src: url}">
                    </div>
                    <div class="media-body">
                        <a class="text-main text-bold mar-no text-overflow" target="_blank" data-bind="text: name, attr: {href: url}"></a>
                        <p class="text-sm" data-bind="html: $parent.formatSize($data)"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</dd>
{% endblock report %}

{% block display_value %}
<span data-bind="text: displayValue() + {% trans "files uploaded" %} || '{% trans "None" %}'"></span>
{% endblock display_value %}
